@COM43
;アイマスク

PRINTL アイマスク
STR:0 = アイマスク

;緊縛経験が高いと消費減少
IF EXP:51 < EXPLV:3
	LOSEBASE:1 += 150
ELSEIF EXP:51 < EXPLV:4
	LOSEBASE:1 += 120
ELSE
	LOSEBASE:1 += 90
ENDIF

A = 250
SOURCE:12 = 1000
SOURCE:14 = 500

;PALAM:欲情をみる
IF PALAM:5 < PALAMLV:1
	TIMES A , 0.80
ELSEIF PALAM:5 < PALAMLV:2
	TIMES A , 0.90
ELSEIF PALAM:5 < PALAMLV:3
	TIMES A , 1.00
ELSEIF PALAM:5 < PALAMLV:4
	TIMES A , 1.10
ELSEIF PALAM:5 >= PALAMLV:4
	TIMES A , 1.20
ENDIF

;ABL:従順をみる
IF ABL:親密 == 0
	TIMES A , 0.40
ELSEIF ABL:親密 == 1
	TIMES A , 0.60
ELSEIF ABL:親密 == 2
	TIMES A , 0.80
ELSEIF ABL:親密 == 3
	TIMES A , 1.00
ELSEIF ABL:親密 == 4
	TIMES A , 1.10
ELSE
	A = A * (ABL:親密 * 5 + 95) / 100
ENDIF

;ABL:マゾっ気をみる
IF ABL:マゾっ気 == 0
	TIMES A , 0.80
ELSEIF ABL:マゾっ気 == 1
	TIMES A , 1.00
ELSEIF ABL:マゾっ気 == 2
	TIMES A , 1.30
ELSEIF ABL:マゾっ気 == 3
	TIMES A , 1.60
ELSEIF ABL:マゾっ気 == 4
	TIMES A , 2.00
ELSE
	A = A * (ABL:マゾっ気 * 50 + 50) / 100
ENDIF

;倒錯的
SIF TALENT:80
	TIMES A , 2.00
;臆病
SIF TALENT:10
	TIMES SOURCE:14 , 2.00


SOURCE:10 += A

UP:5 += A
UP:10 += SOURCE:14

EXP:51 += 2
PRINTL 緊縛経験＋２

CALL TRAIN_MESSAGE_B

;アイマスクの着脱
IF TEQUIP:43
	TEQUIP:43 = 0
ELSE
	TEQUIP:43 = 1
ENDIF

RETURN 1

@TRAIN_MESSAGE_COM43
;アイマスクの着脱
IF TEQUIP:43
	PRINTFORML %CALLNAME:TARGET%からアイマスクをはずしてあげた
ELSE
	PRINTFORML %CALLNAME:TARGET%にアイマスクを着けさせた
ENDIF


@EQUIP_COM43
;アイマスク

PRINTL ＜アイマスク装着中＞

LOSEBASE:0 += 0
;緊縛経験が高いと消費減少
IF EXP:51 < EXPLV:3
	LOSEBASE:1 += 100
ELSEIF EXP:51 < EXPLV:4
	LOSEBASE:1 += 80
ELSE
	LOSEBASE:1 += 60
ENDIF

A = 250
B = 1000
C = 500

;PALAM:欲情をみる
IF PALAM:5 < PALAMLV:1
	TIMES A , 0.80
ELSEIF PALAM:5 < PALAMLV:2
	TIMES A , 0.90
ELSEIF PALAM:5 < PALAMLV:3
	TIMES A , 1.00
ELSEIF PALAM:5 < PALAMLV:4
	TIMES A , 1.10
ELSEIF PALAM:5 >= PALAMLV:4
	TIMES A , 1.20
ENDIF

;ABL:従順をみる
IF ABL:親密 == 0
	TIMES A , 0.40
ELSEIF ABL:親密 == 1
	TIMES A , 0.60
ELSEIF ABL:親密 == 2
	TIMES A , 0.80
ELSEIF ABL:親密 == 3
	TIMES A , 1.00
ELSEIF ABL:親密 == 4
	TIMES A , 1.10
ELSE
	A = A * (ABL:親密 * 5 + 95) / 100
ENDIF

;ABL:マゾっ気をみる
IF ABL:マゾっ気 == 0
	TIMES A , 0.80
ELSEIF ABL:マゾっ気 == 1
	TIMES A , 1.00
ELSEIF ABL:マゾっ気 == 2
	TIMES A , 1.30
ELSEIF ABL:マゾっ気 == 3
	TIMES A , 1.60
ELSEIF ABL:マゾっ気 == 4
	TIMES A , 2.00
ELSE
	A = A * (ABL:マゾっ気 * 50 + 50) / 100
ENDIF

;倒錯的
SIF TALENT:80
	TIMES A , 2.00
;臆病
SIF TALENT:10
	TIMES C , 2.00


SOURCE:10 += A
SOURCE:12 += B
SOURCE:14 += C

UP:5 += A
UP:10 += SOURCE:14


IF TALENT:122 == 0 && TALENT:PLAYER:122 == 0
	PRINTS EXPNAME:40
	PRINTL +1
	EXP:40 += 1
	EXP:PLAYER:40 += 1
ELSEIF TALENT:122 == 1 && TALENT:PLAYER:122 == 1
	PRINTS EXPNAME:41
	PRINTL +1
	EXP:41 += 1
	EXP:PLAYER:41 += 1
ENDIF

EXP:51 += 1
PRINTL 緊縛経験＋１

RETURN 1
