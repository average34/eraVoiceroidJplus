@COM_ABLE184
;コンドーム精飲(マスター)
;COM_ABLE共通判定
CALL COM_ABLE_COMMON, SELECTCOM
SIF RESULT == 0
	RETURN 0
;ウフフ中じゃないと無理
SIF TFLAG:44 == 0
	RETURN 0
;マスターじゃないとダメ
SIF ASSIPLAY
	RETURN 0
;触手調教中はダメ
SIF TEQUIP:90
	RETURN 0
;汚れ無視がないとダメ
SIF TALENT:MASTER:汚れ無視 == 0
	RETURN 0
;それまでの調教でゴム射してないとダメ
;CFLAG107
SIF CFLAG:107 == 0
	RETURN 0
;IF ASSI > 0
;	SIF CFLAG:ASSI:107 == 0
;		RETURN 0
;ENDIF
RETURN 1

@COM184
;コンドーム精飲

PRINTL コンドーム精飲(マスター)
STR:0 = コンドーム精飲(マスター)


CFLAG:MASTER:108 = 0
I = CFLAG:107
;SIF CFLAG:MASTER:107
;	I |= 1
;IF ASSI > 0
;	SIF CFLAG:ASSI:107
;		I |= 2
;ENDIF
;SIF CFLAG:107
;	I |= 4

IF I == 1
	CFLAG:MASTER:108 = 1
	CFLAG:107 -= 1
ELSEIF I == 2
	CFLAG:MASTER:108 = 2
	CFLAG:107 -= 2
ELSEIF I == 4
	CFLAG:MASTER:108 = 3
	CFLAG:107 -= 4
ELSE
	PRINT 誰の使用済みコンドームを使いますか？
	IF I == 3
		PRINT [0] 
		PRINTS CALLNAME:MASTER
		PRINT [1] 
		PRINTS CALLNAME:ASSI
	ELSEIF I == 5
		PRINT [0] 
		PRINTS CALLNAME:MASTER
		PRINT [2] 
		PRINTS CALLNAME:TARGET
	ELSEIF I == 6
		PRINT [1] 
		PRINTS CALLNAME:ASSI
		PRINT [2] 
		PRINTS CALLNAME:TARGET
	ELSEIF I == 7
		PRINT [0] 
		PRINTS CALLNAME:MASTER
		PRINT [1] 
		PRINTS CALLNAME:ASSI
		PRINT [2] 
		PRINTS CALLNAME:TARGET
	ENDIF
	$INPUT_LOOP
	INPUT
	IF RESULT == 0 && (I & 1)
		CFLAG:MASTER:108 = 1
		CFLAG:107 -= 1
	ELSEIF RESULT == 1 && (I & 2)
		CFLAG:MASTER:108 = 2
		CFLAG:107 -= 2
	ELSEIF RESULT == 2 && (I & 4)
		CFLAG:MASTER:108 = 3
		CFLAG:107 -= 4
	ELSE
		GOTO INPUT_LOOP
	ENDIF
ENDIF

CALL TRAIN_MESSAGE_B

;-------------------------------------------------
;実行決定
;-------------------------------------------------
;-------------------------------------------------
;ソースの計算
;-------------------------------------------------
LOSEBASE:体力 += 0
LOSEBASE:気力 += 30

SOURCE:11 = 500

;ABL:欲情をみる
IF ABL:欲望 == 0
	TIMES SOURCE:11 , 0.25
ELSEIF ABL:欲望 == 1
	TIMES SOURCE:11 , 0.50
ELSEIF ABL:欲望 == 2
	TIMES SOURCE:11 , 0.75
ELSEIF ABL:欲望 == 3
	TIMES SOURCE:11 , 1.00
ELSEIF ABL:欲望 == 4
	TIMES SOURCE:11 , 1.25
ELSE
	TIMES SOURCE:11 , 1.50
ENDIF

;ABL:精液中毒を見る
IF ABL:精液中毒 == 0
	TIMES SOURCE:11 , 0.10
ELSEIF ABL:精液中毒 == 1
	TIMES SOURCE:11 , 0.40
ELSEIF ABL:精液中毒 == 2
	TIMES SOURCE:11 , 0.70
ELSEIF ABL:精液中毒 == 3
	TIMES SOURCE:11 , 1.00
ELSEIF ABL:精液中毒 == 4
	TIMES SOURCE:11 , 1.30
ELSE
	TIMES SOURCE:11 , 1.60
ENDIF

;助手の口に精液汚れ
STAIN:MASTER:0 |= 4

;;コンドームの精液を初期化
;CFLAG:107 = 0
RETURN 1

;コンドーム精飲(マスター)
@TRAIN_MESSAGE_COM184
PRINTFORM %CALLNAME:MASTER%は
IF CFLAG:108 == 1
	PRINTS CALLNAME:MASTER
ELSEIF CFLAG:108 == 2
	PRINTS CALLNAME:ASSI
ELSE
	PRINTS CALLNAME:TARGET
ENDIF
PRINTFORMW の使用済みコンドームを手に取った……
PRINT そして、
IF TALENT:MASTER:サド
	PRINTFORM %CALLNAME:TARGET%が舌をのばせば届きそうなぐらいの距離で、
ELSE
	PRINTFORM %CALLNAME:TARGET%に見せびらかすように
ENDIF
IF ABL:MASTER:精液中毒 >= 5
	PRINTL 恍惚の表情で精液を味わった……
ELSE
	PRINTL おいしそうに精液を味わった……
ENDIF
PRINTFORM %CALLNAME:TARGET%は
IF ABL:TARGET:精液中毒 >= 5
	PRINTL 我慢できないのか、涎を垂らしながらその光景を見ている……
ELSEIF ABL:TARGET:精液中毒 >= 3 || (TALENT:恋慕 && (CFLAG:108 == 1))
	PRINTL 物欲しげな表情でじっとその光景を見ている……
ELSEIF ABL:TARGET:精液中毒 >= 1
	PRINTL 必死に目をそらそうとしているが、その目は目の前の光景に釘付けになっている……
ELSE
	PRINTL その光景に呆れた顔をしている……
ENDIF

